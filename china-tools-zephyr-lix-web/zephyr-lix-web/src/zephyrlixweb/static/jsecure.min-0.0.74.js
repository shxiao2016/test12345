!function(a,b){"function"==typeof define&&define.amd?define("jSecure",[],function(){return a.jSecure=b()}):"object"==typeof exports?module.exports=b():a.jSecure=b()}(this,function(){function a(a){return a.indexOf("<")>-1||a.indexOf("&")>-1}function b(a){return a=a||j,new RegExp("<(?!/?(?:"+a.join("|")+")(?:/?>|[ 	\r\n]+(?:(?:(?:"+k+")(?:=([\"'])[^'\"<>]*\\1)?|(?:"+l+")=([\"'])(?:(?:"+m+")(?::|&#(?:58|x3a);)|[/.#?]|&#(?:35|4[67]|63|x(?:2[3ef]|3f));)[^'\"<>]*\\2)[ 	\r\n]*)+/?>))","i")}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a){return a.reduce(function(a,b){return a.concat(b)},[])}function e(a){return!e.R_UNSAFE_HTML.test(a)}function f(a){return a.replace(/<[^>]*>|[<>'"&\\]/g,"")}function g(){}var h=Object.hasOwnProperty.call(document.createElement("div"),"textContent")?"textContent":"innerText",i=["b","del","em","i","s","strong","sub","sup"],j=i.concat(["a","abbr","address","area","article","aside","audio","bdi","bdo","big","blockquote","br","button","center","cite","code","datalist","dd","details","dfn","div","dl","dt","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","img","ins","kbd","label","legend","li","map","mark","marquee","nav","nobr","ol","p","pre","q","rp","rt","ruby","samp","section","small","source","span","strike","table","tbody","td","tfoot","th","thead","time","tr","u","ul","var","video","wbr"]),k="alt|aria-[a-z0-9_\\-]+|border|caption|checked|class|colgroup|color|cols|colspan|controls|coords|data-[a-z0-9_\\-]+|dir|disabled|height|hidden|hreflang|id|label|loop|marginheight|marginwidth|maxlength|method|multiple|name|preload|readonly|rel|required|reversed|role|rows|rowspan|spellcheck|tabindex|target|title|type|usemap|width|clear|headers|ismap|lang|start|datetime|accept|max|min|placeholder|size|step",l="href|src",m="https?|ftp|mailto",n="&#?[a-zA-Z0-9]{1,10};";new RegExp(n);forEach=function(){return Array.prototype.forEach?function(a,b){Array.prototype.forEach.call(a,b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}}(),e.R_UNSAFE_HTML=b();var o={ALLOWED_TAGS:j,FORMATTING_TAGS:i};return function(){o.htmlEncode=function(){var a,b=/[&<>"'\u0000\\=]/g;return a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","\x00":"�","\\":"&#92;","=":"&#61;"},function(c){return null===c||void 0===c?null:c.toString().replace(b,function(b){return a[b]})}}(),o.htmlUnencode=function(){function a(a){var b;return e.hasOwnProperty(a)?e[a]:(c.innerHTML="&"+a+";",b=c[h],e[a]=b,b)}var b,c=document.createElement("div"),d=/&(?:([a-z0-9]+)|#x([\da-f]{1,6})|#(\d{1,8}));/gi,e={nbsp:" ",lt:"<",gt:">",amp:"&",quot:'"'};return b="function"==typeof String.fromCodePoint?function(a){return String.fromCodePoint(a)}:function(a){return 65535>=a?String.fromCharCode(a):"�"},function(c){return null===c||void 0===c?null:(c+"").replace(d,function(c,d,e,f){return d?a(d):e||f?b(parseInt(e||f,e?16:10)||65533):"�"})}}(),o.log=function(a,b){b=b||"log","undefined"!=typeof console&&"function"==typeof console[b]&&console[b](a)},o.reEncode=function(a){return o.htmlEncode(o.htmlUnencode(a))},o.text=function(a){return o.log("jSecure.text() is deprecated. Please use jSecure.htmlEncode().","warn"),o.htmlEncode(a)},o.unsafe=function(a){return a}}(),function(){function b(a,b){var c={};return a.replace(/\{([^}]+)\}/g,function(a,d){var e,f,h=a;if(c.hasOwnProperty(d))return c[d];if(b.hasOwnProperty(d)){if(h=b[d],e="string"==typeof h,f="number"==typeof h,!(e||h instanceof g||f))throw new Error("Only strings, numbers, and jSecure types are allowed as placeholder replacements.");h=e?o.htmlEncode(h):h.toString()}return c[d]=h,h})}function c(a,b){var c;return e(b)||(c=b,b=f(b),o.log("Content contains non-whitelisted tags or attributes:\nContent: "+c,"warn")),a.innerHTML=b,b}o.setElementContent=function(d,e,f){var g=f?b(e,f):e;return a(g)?g=c(d,g):d[h]=g,g}}(),function(){var a=o.UnsafeString=function(b,c){return this instanceof a?(c=c||{},c.allowTags=c.allowTags?d(c.allowTags):o.ALLOWED_TAGS,this._string=b,void(this._options=c)):new a(b,c)};a.prototype=c(new g,{toString:function(){var a,c=this._string,d=this._options.allowTags,e=this._stringVal,g=c;return void 0!==e?e:(a=b(d),a.test(c)&&(g=c,c=f(c),o.log("UnsafeString contains non-whitelisted tags or attributes.\nString: "+g+"\nAllowed Tags: "+d,"warn")),this._stringVal=c,c)}})}(),o});